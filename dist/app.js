!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=409)}({18:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r={"Content-Type":"application/json",ChannelAuthorization:"Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ=="},a={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},i="https://olsrvpruwbce01:6595/",s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"acceptTerms",value:function(e,t){var n={publicIP:e,customerId:parseInt(t),termsId:[7,8]};return console.log("DATA ACC:"),console.log(n),fetch("".concat(i,"Gateway/api/v2_0/terms/acceptance"),{method:"POST",body:JSON.stringify(n),headers:r}).then((function(e){return e.json()}))}},{key:"createCustomer",value:function(e,t,n,o,a,s){var c={firstName:e,lastName:t,password:n,user:o,customerMobile:a,publicIP:s};return fetch("".concat(i,"Gateway/api/v2_0/createCustomer"),{method:"POST",body:JSON.stringify(c),headers:r}).then((function(e){return e.json()}))}},{key:"validateUser",value:function(e,t,n,o,a,s,c,l,u,d,m,f){var p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:void 0,g={user:e,phoneNumber:t,deviceInfo:{publicIp:n,browser:o,os:s,isMobile:c,isTablet:l,isDesktop:u,hasCamera:d,hasSecondaryCamera:m,hasFingerprintReader:f}};return p&&(g.processCode=p),console.log("processCode: ".concat(p)),console.log(g),fetch("".concat(i,"Gateway/api/v2_0/validate/user"),{method:"POST",body:JSON.stringify(g),headers:r}).then((function(e){return e.json()}))}},{key:"validate",value:function(e,t){var n={guid:e,data:t};return console.log(n),fetch("".concat(i,"Gateway/api/v2_0/validate"),{method:"POST",body:JSON.stringify(n),headers:r}).then((function(e){return e.json()}))}},{key:"getTerms",value:function(){return fetch("".concat(i,"Gateway/Terms")).then((function(e){return e.json()}))}},{key:"getEspecificTerms",value:function(e){for(var t="",n=0;n<e.length;n++)t+="ids="+e[n]+"&";return t=t.slice(0,-1),fetch("".concat(i,"Gateway/EspecificTerms/").concat(t)).then((function(e){return e.json()}))}},{key:"resetPassword",value:function(e){var t={newPassword:e};return fetch("".concat(i,"Gateway/ResetPassword"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",ChannelAuthorization:"Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ==",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()}))}},{key:"addToMiFirma",value:function(e,t,n){var o={name:e,email:t,phoneNumber:parseInt(n)};return fetch("".concat("https://olsrvpruwbce01:6741/","Gateway/api/v1_0/user/create"),{method:"POST",body:JSON.stringify(o),headers:r}).then((function(e){return e.json()}))}},{key:"uploadSignature",value:function(e,t,n){console.log(a);var o={file:e,fileName:t,fileExtension:n},r="".concat("https://olsrvpruwbce01:6741/","Gateway/api/v1_0/graph/save");return fetch(r,{method:"POST",body:JSON.stringify(o),headers:a}).then((function(e){return e.json()}))}},{key:"getValidationParameter",value:function(e){var t="".concat(i,"Gateway/api/v2_0/customers/getValidationParameter/").concat(e);return fetch(t,{method:"GET",headers:r}).then((function(e){return e.json()}))}},{key:"activateAccount",value:function(e){var t={activator:e};return fetch("".concat(i,"Gateway/api/v2_0/customers/activateAccount"),{method:"POST",body:JSON.stringify(t),headers:r}).then((function(e){return e.json()}))}}])&&o(t.prototype,n),s&&o(t,s),e}());t.a=s},2:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"logout",value:function(){var e=localStorage.getItem("noob");null==e&&(e="1"),localStorage.clear(),localStorage.setItem("noob",e)}},{key:"authority",get:function(){return localStorage.getItem("homeAccountIdentifier")}},{key:"idCustomer",get:function(){return localStorage.getItem("idCustomer")}},{key:"userId",get:function(){return localStorage.getItem("personaId")}},{key:"authId",get:function(){return localStorage.getItem("authId")}},{key:"identificadorOtp",get:function(){return localStorage.getItem("identificadorOTP")}},{key:"recoRestrictive",get:function(){return localStorage.getItem("reconoserRestrictive")}},{key:"otpRestrictive",get:function(){return localStorage.getItem("otpRestrictive")}},{key:"username",get:function(){return localStorage.getItem("personaNombre")}},{key:"documentUser",get:function(){return localStorage.getItem("documento")}},{key:"emailUser",get:function(){return localStorage.getItem("correo")}},{key:"reconoserGuid",get:function(){return localStorage.getItem("reconoserGuid")}},{key:"reconoserUrl",get:function(){return localStorage.getItem("reconoserUrl")}},{key:"validarOtp",get:function(){return localStorage.getItem("validarOtp")}},{key:"phoneUser",get:function(){return localStorage.getItem("celular")}},{key:"phoneUser2",get:function(){return localStorage.getItem("phoneUser")}},{key:"isLogged",get:function(){return null!=localStorage.getItem("token")}},{key:"isRequestPending",get:function(){return null!=localStorage.getItem("pendingRequest")}},{key:"isANoob",get:function(){return"1"===localStorage.getItem("noob")}},{key:"isNoobNull",get:function(){return null==localStorage.getItem("noob")}},{key:"firstName",get:function(){return localStorage.getItem("firstName")}},{key:"lastName",get:function(){return localStorage.getItem("lastName")}},{key:"customerMobile",get:function(){return localStorage.getItem("customerMobile")}},{key:"user",get:function(){return localStorage.getItem("user")}},{key:"userIp",get:function(){return localStorage.getItem("userIp")}},{key:"signatureGuid",set:function(e){localStorage.setItem("firma",e)}}])&&o(t.prototype,n),r&&o(t,r),e}());t.a=r},23:function(e,t,n){var o,r,a;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n,s){"object"==i(t)&&void 0!==e?s(t):(r=[t],void 0===(a="function"==typeof(o=s)?o.apply(t,r):o)||(e.exports=a))}(0,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return!t||"object"!=i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return"string"==typeof e}function l(e,t,n){var o=0<arguments.length&&void 0!==e?e:"div",r=1<arguments.length&&void 0!==t?t:null,a=2<arguments.length&&void 0!==n?n:[],i=document.createElement(o);if(null!==r){var s=function(e){var t;((t=e).startsWith("on")?t.toLowerCase():"on".concat(t))in window?i.addEventListener(e,(function(t){r[e](t,i)})):i.setAttribute(e,r[e])};for(var c in r)s(c)}return 0<a.length&&a.forEach((function(e){"string"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(e)})),i}var u=function(){function e(n){t(this,e),this.options=n,c(n.title)&&(this.title=n.title),this.useInnerHTML=!0===n.useInnerHTML,c(n.content)&&(this.content=n.content),n.animation&&("boolean"==typeof n.animation||c(n.animation))?this.animation=n.animation:this.animation="fade",this.port=null,this.template=this.createBase()}return o(e,[{key:"createBase",value:function(){var e,t=this,n=l("div",{class:"close",click:function(){t.close()}});return n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',this.port=l("div",{class:"port"}),e="fade"===this.animation?"opacity:0;":"",this.container=l("div",{class:"attention-component",style:e},[l("div",{class:"inner"},[l("div",{class:"content"},[n,this.port])])]),this.container}},{key:"render",value:function(e){var t,n,o,r=0<arguments.length&&void 0!==e?e:document.body;this.options.beforeRender&&this.options.beforeRender(this),r.appendChild(this.template),this.options.afterRender&&this.options.afterRender(this),"fade"===this.animation&&(t=this.template,o=0,window.requestAnimationFrame((function e(){100<=o?(window.cancelAnimationFrame(e),n&&n(t)):(o+=10,t.style.opacity=(o/100).toString(),window.requestAnimationFrame(e))})))}},{key:"destroy",value:function(){this.container.parentElement.removeChild(this.container),this.options.afterClose&&this.options.afterClose(this)}},{key:"close",value:function(){var e,t,n,o=this;this.options.beforeClose&&this.options.beforeClose(this),this.animation?"fade"===this.animation&&(e=this.container,t=function(){o.destroy()},n=100,window.requestAnimationFrame((function o(){n<=0?(window.cancelAnimationFrame(o),t&&t()):(n-=10,e.style.opacity=(n/100).toString(),window.requestAnimationFrame(o))}))):this.destroy()}}]),e}(),d=function(){function e(n){var o;return t(this,e),(o=s(this,a(e).call(this,n))).injectTemplate(),o.render(),o}return r(e,u),o(e,[{key:"injectTemplate",value:function(){var e,t=l("div",{class:"head"},[l("p",{class:"title"},[this.title])]);if(this.port.appendChild(t),this.useInnerHTML){var n=l("div",{class:"content"});n.innerHTML=this.content,e=l("div",{class:"inner-container"},[n])}else e=l("div",{class:"inner-container"},[l("p",{class:"content"},[this.content])]);this.port.appendChild(t),this.port.appendChild(e)}}]),e}(),m=function(){function e(n){var o;return t(this,e),(o=s(this,a(e).call(this,n))).submitText=c(n.submitText)?n.submitText:"Send",o.placeholderText=c(n.placeholderText)?n.placeholderText:"Type",o.injectTemplate(),o.render(),o}return r(e,u),o(e,[{key:"handleInput",value:function(e){"Enter"!==e.key&&13!==e.keyCode||this.submit()}},{key:"submit",value:function(){var e=this.input.value;""!==e&&(this.close(),this.options.onSubmit&&this.options.onSubmit(this,e))}},{key:"injectTemplate",value:function(){var e=this,t=l("div",{class:"head"},[l("p",{class:"title"},[this.title])]);this.port.appendChild(t),this.input=l("input",{type:"text",class:"input",placeholder:this.placeholderText,keyup:function(t,n){e.handleInput(t,n)}});var n,o=l("div",{class:"prompt-elements"},[this.input,l("button",{class:"button",click:function(){e.submit()}},[this.submitText])]);if(this.useInnerHTML){var r=l("div",{class:"content"});r.innerHTML=this.content,n=l("div",{class:"inner-container"},[r,o])}else n=l("div",{class:"inner-container"},[l("p",{class:"content"},[this.content]),o]);this.port.appendChild(t),this.port.appendChild(n)}}]),e}(),f=function(){function e(n){var o;return t(this,e),(o=s(this,a(e).call(this,n))).buttonCancel=c(n.buttonCancel)?n.buttonCancel:"No",o.buttonConfirm=c(n.buttonConfirm)?n.buttonConfirm:"Agree",o.injectTemplate(),o.render(),o}return r(e,u),o(e,[{key:"injectTemplate",value:function(){var e,t=this,n=l("div",{class:"head"},[l("p",{class:"title"},[this.title])]);if(this.port.appendChild(n),this.useInnerHTML){var o=l("div",{class:"content"});o.innerHTML=this.content,e=l("div",{class:"inner-container"},[o])}else e=l("div",{class:"inner-container"},[l("p",{class:"content"},[this.content])]);e.appendChild(l("div",{class:"buttons"},[l("button",{class:"cancel",click:function(){t.close(),t.options.onCancel&&t.options.onCancel(t)}},[this.buttonCancel]),l("button",{class:"confirm",click:function(){t.close(),t.options.onConfirm&&t.options.onConfirm(t)}},[this.buttonConfirm])])),this.port.appendChild(n),this.port.appendChild(e)}}]),e}();e.Alert=d,e.Confirm=f,e.Prompt=m,e.version="0.1.0",Object.defineProperty(e,"__esModule",{value:!0})}))},35:function(e,t,n){"use strict";function o(e){for(var t="",n=e.byteLength,o=0;o<n;++o)t+=String.fromCharCode(e[o]);return window.btoa(t)}function r(e){return"rgba(158,234,170,0.5)"===e?"#9eeaaa":"#a0daff"}function a(e){var t,n,o,r=navigator.appVersion,a=navigator.userAgent,i=navigator.appName,s=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10);-1!=(n=a.indexOf("Opera"))&&(i="Opera",s=a.substring(n+6),-1!=(n=a.indexOf("Version"))&&(s=a.substring(n+8))),-1!=(n=a.indexOf("OPR"))?(i="Opera",s=a.substring(n+4)):-1!=(n=a.indexOf("Edge"))?(i="Microsoft Edge",s=a.substring(n+5)):-1!=(n=a.indexOf("MSIE"))?(i="Microsoft Internet Explorer",s=a.substring(n+5)):-1!=(n=a.indexOf("Chrome"))?(i="Chrome",s=a.substring(n+7)):-1!=(n=a.indexOf("Safari"))?(i="Safari",s=a.substring(n+7),-1!=(n=a.indexOf("Version"))&&(s=a.substring(n+8))):-1!=(n=a.indexOf("Firefox"))?(i="Firefox",s=a.substring(n+8)):-1!=a.indexOf("Trident/")?(i="Microsoft Internet Explorer",s=a.substring(a.indexOf("rv:")+3)):(t=a.lastIndexOf(" ")+1)<(n=a.lastIndexOf("/"))&&(i=a.substring(t,n),s=a.substring(n+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!=(o=s.indexOf(";"))&&(s=s.substring(0,o)),-1!=(o=s.indexOf(" "))&&(s=s.substring(0,o)),-1!=(o=s.indexOf(")"))&&(s=s.substring(0,o)),c=parseInt(""+s,10),isNaN(c)&&(s=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10));var l="unknown",u=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var d in u){var m=u[d];if(m.r.test(a)){l=m.s;break}}var f="unknown";switch(/Windows/.test(l)&&(f=/Windows (.*)/.exec(l)[1],l="Windows"),l){case"Mac OS X":f=/Mac OS X (10[\.\_\d]+)/.exec(a)[1];break;case"Android":f=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":f=(f=/OS (\d+)_(\d+)_?(\d+)?/.exec(r))[1]+"."+f[2]+"."+(0|f[3])}return e.jscd={browser:i,browserVersion:s,browserMajorVersion:c,os:l,osVersion:f}}function i(){var e=navigator.mediaDevices;return new Promise((function(t,n){e&&e.enumerateDevices||(console.log("No hay media devices, saltar al próximo paso !"),t(!1)),e.enumerateDevices().then((function(e){e.some((function(e){return"videoinput"===e.kind}))?t(!0):t(!1)})).catch((function(){return n(!1)}))}))}n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}))},409:function(e,t,n){"use strict";n.r(t);var o,r,a=n(18),i=n(85),s=n(2),c=n(23),l=n(35);n(72),n(73),n(74);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function m(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var p=0,g=[],y=!1,h=!1,v=0,b=!1,I={email:"",password:""};function w(e){if(void 0!==e){e.preventDefault();var t=e.target,n=t.id,o=t.value;I[n]=o}console.log("ON INPUT")}function S(e){if(void 0!==e&&e.preventDefault(),document.getElementById("load-banner").style.display="block","1"===localStorage.getItem("noob")&&"0"===localStorage.getItem("authId"))return console.log("Inicio Proceso Creacion"),localStorage.setItem("authId","1"),I.email=localStorage.getItem("user"),O(),void(document.getElementById("load-banner").style.display="none");""!==I.password?E():O()}function E(){v++,console.log("Attempt # ".concat(v," to submit...")),document.getElementById("load-banner").style.display="block",""!==I.password?""!==I.email||""!==I.password?(h?console.log("autenticating this new user with ".concat(s.a.authId," and ").concat(I.password)):console.log("no authentication has been done, will be done with ".concat(s.a.authId)),a.a.validate(s.a.authId,I.password).then((function(e){if(e.data.hit){var t=e.data.nextStep.properties.TOKEN;void 0!==t?(localStorage.setItem("token",t),window.resizeTo(1200,650),window.location.href="https://frosty-archimedes-0b2d91.netlify.app/documentos.html"):(document.getElementById("load-banner").style.display="none",new c.Alert({title:"Error en el Backend",content:"No se ha definido el Token de autorización"}))}else I.password="",document.getElementById("load-banner").style.display="none",document.getElementById("password-error").style.display="block",document.getElementById("password").style.borderColor="tomato",new c.Alert({title:"Error de autenticación",content:"Contraseña Incorrecta"})})).catch((function(e){console.log(e),e.error&&403===e.error.statusCode&&(document.getElementById("password-error").style.display="block",document.getElementById("password-error").style.borderColor="tomato",document.getElementById("password-error").textContent="Superó el máximo de intentos de autenticación, su usuario ha sido bloqueado por medidas de seguridad",console.log("Superó el máximo de intentos de autenticación, su usuario ha sido bloqueado por medidas de seguridad"))}))):N():O()}function O(){if(""!==I.email){var e=window.innerWidth<=640,t=!e&&window.innerWidth<=800,n=!e&&!t,i=l.b(window);console.log("Validating..."),h&&console.log("this is a new user"),a.a.validateUser(I.email,"",r,i.browser,"",i.os,e,t,n,o,!1,!1).then((function(e){if(e.data.userExists)console.log("Logeando user exist..."),function(e){localStorage.setItem("personaNombre","".concat(e.data.user.customerFirstName," ").concat(e.data.user.customerLastName)),localStorage.setItem("phoneUser",e.data.user.customerMobile),localStorage.setItem("correo",I.email),localStorage.setItem("personaId",e.data.user.idCustomer),localStorage.setItem("authId",e.data.authId),B(e)}(e);else{var t=document.createAttribute("required"),n=document.createAttribute("required");document.getElementById("datos").attributes.setNamedItem(t),document.getElementById("terms").attributes.setNamedItem(n),localStorage.setItem("authId",e.data.authId),p++,console.log("Creando este nuevo usuario iter:"),localStorage.getItem("userFromOffice")&&y?console.log("El usuario viene de office"):console.log("El usuario NO viene de office"),console.log(p);var o,r,a=d(document.getElementsByClassName("thirdScreen"));try{for(a.s();!(o=a.n()).done;){o.value.style.display="block"}}catch(e){a.e(e)}finally{a.f()}if((y="true"==localStorage.getItem("userFromOffice"))&&!b)r=function(){var e=0,t=Object.keys(localStorage),n=t.length;for(;n--;){var o=t[n];if(o.startsWith("{"))for(var r=JSON.parse(o),a=0,i=Object.entries(r);a<i.length;a++){var s=u(i[a],2),c=s[0],l=s[1];localStorage.setItem(c,l),"homeAccountIdentifier"===c&&(console.log("found: ".concat(c,": ").concat(l)),e=l,y=!0,localStorage.setItem("userFromOffice",y))}}return e}(),console.log("El usuario SI viene de office"),function(){var e=document.getElementById("pass1"),t=document.getElementById("pass2"),n=document.getElementById("password1"),o=document.getElementById("password2");e.style.display="none",t.style.display="none",document.getElementById("email").disabled=!0,n.value=localStorage.getItem("homeAccountIdentifier"),o.value=n.value}();else{console.log("El usuario NO viene de office"),localStorage.setItem("user",I.email),document.getElementById("header").style.paddingTop="10px",document.getElementById("welcome-message").innerHTML="Verifica tu información:";var i=document.createAttribute("required"),s=document.createAttribute("required");document.getElementById("password1").attributes.setNamedItem(i),document.getElementById("password2").attributes.setNamedItem(s)}if(console.log("fetched: ".concat(r)),p>1){var c=document.getElementById("password1"),l=document.getElementById("password2");""!==c.value&&c.value==l.value&&(document.getElementById("user-error").innerHTML="ERROR EN CREACION: pass not set or invalid"),(y&&!h||b&&!h)&&k()}if(p>1)return;document.getElementById("load-banner").style.display="none",document.getElementById("user-error").style.display="block"}})).catch((function(e){console.log("user error",e),e.error&&403===e.error.statusCode&&new c.Alert({title:"Error de autenticación",content:"Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde"})}))}else N()}function k(){console.log("pass:"),console.log(document.getElementById("password1").value),document.getElementById("load-banner").style.display="block",a.a.createCustomer(s.a.firstName,s.a.lastName,document.getElementById("password1").value,s.a.user,s.a.customerMobile,s.a.userIp).then((function(e){if("Created"!==e.status||201!==e.statusCode)return console.log("ERROR:"),void console.log(e);console.log(e.message),localStorage.setItem("idCustomer",e.data.idCustomer),T()}))}function T(){document.getElementById("load-banner").style.display="block",a.a.validate(s.a.authId,"").then((function(e){if(!e.data.hit||"OTP"!==e.data.nextStep.process)return console.log("ERROR:"),void console.log(e);!function e(){document.getElementById("load-banner").style.display="none",document.getElementById("otp-modal").style.display="flex";var t=document.getElementById("otp-form"),n=localStorage.getItem("phoneUser");document.getElementById("resend-code").addEventListener("click",(function(){T()})),document.getElementById("phoneUs").innerHTML=n,t.addEventListener("submit",(function(t){t.preventDefault();var n=document.getElementById("opt-input").value;document.getElementById("load-banner").style.display="block",console.log("the pin: ".concat(n)),a.a.validate(s.a.authId,n).then((function(t){t.data.hit?(console.log("Que falta?"),console.log(t),a.a.acceptTerms(s.a.userIp,s.a.idCustomer).then((function(e){var t;e.success&&a.a.addToMiFirma(s.a.firstName+" "+s.a.lastName,s.a.user,s.a.customerMobile).then((function(e){201===e.status_code?a.a.getValidationParameter(s.a.user).then((function(e){if(200==e.statusCode){t=e.message;var n=s.a.user+"&&&"+t,o=window.btoa(n);a.a.activateAccount(o).then((function(e){200==e.statusCode?function(){h=!0,document.getElementById("load-banner").style.display="none";var e=document.getElementById("otp-modal"),t=document.getElementById("modal-content");e.style.display="flex",t.innerHTML='<h2>Todo salió bien</h2>\n  <p>Ya puedes comenzar a usar MiFirma</p>\n    <div class="MF-center">\n      <button class="MF-button2" id="end-process">Firmar ahora</button>\n    </div>\n  ',document.getElementById("end-process").addEventListener("click",(function(){I.email=s.a.user,I.password=s.a.authority,console.log("Iniciando Sesion... con ".concat(I.email," y ").concat(I.password)),O()}))}():C()}))}else C()})):C()}))}))):(document.getElementById("otp-error").style.display="block",document.getElementById("otp-error").innerText="Código Incorrecto",console.log(t),e())}))}))}()}))}function C(){h=!1,document.getElementById("load-banner").style.display="none";var e=document.getElementById("otp-modal"),t=document.getElementById("modal-content");e.style.display="flex",t.innerHTML="<h2>Algo salió mal</h2>\n  <p>Por favor intente nuevamente mas tarde</p>"}function B(e){switch(console.log("Next step:"),console.log(e.data.nextStep.process),e.data.nextStep.process){case"Registro":console.log("Registrando Usuario...");break;case"Terminos":!function(e){if("{}"==JSON.stringify(e.data.nextStep.properties))a.a.validate(e.data.authId,"").then((function(t){e.data.user.isActive&&B(t)})).catch((function(e){console.log(e),e.error&&403===e.error.statusCode&&console.log("Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde")}));else{for(var t in console.log("Unhandled Terms! "),document.getElementById("load-banner").style.display="none",new c.Alert({title:"Terminos y condiciones",content:"Hemos actualizado nuestros términos y condiciones"}),e.data.nextStep.properties)g.push(+e.data.nextStep.properties[t]);console.log(g),e.data.user.isActive||localStorage.setItem("noActive","false")}}(e);break;case"Facial":routerInstance.navigate(["login/facial"]);break;case"OTP":routerInstance.navigate(["login"]);break;case"Password":var t="true"==localStorage.getItem("userFromOffice");if(h||t)document.getElementById("password").value=s.a.authority,I.password=document.getElementById("password").value,console.log("key: "),console.log(I.password),E();else{var n=document.createAttribute("required");document.getElementById("customerName").innerText=localStorage.getItem("personaNombre"),document.getElementById("password").attributes.setNamedItem(n),document.getElementById("submit-btn").textContent="Ingresar",document.getElementById("load-banner").style.display="none";var o,r=d(document.getElementsByClassName("firstScreen"));try{for(r.s();!(o=r.n()).done;){o.value.style.display="none"}}catch(e){r.e(e)}finally{r.f()}var i,l=d(document.getElementsByClassName("secondScreen"));try{for(l.s();!(i=l.n()).done;){i.value.style.display="block"}}catch(e){l.e(e)}finally{l.f()}}}}function N(){document.getElementById("load-banner").style.display="none",new c.Alert({title:"Error de autenticación",content:"Correo o contraseña inválidos"})}Office.onReady((function(e){b="true"==localStorage.getItem("outsideOffice"),y&&console.log("Comienzo"),console.log(localStorage.getItem("word-document-name1")),console.log(localStorage.getItem("word-document1")),e.host===Office.HostType.Word&&("https://app.mifirma.co/"===window.location.href,l.c().then((function(e){o=e})),i.a.getIp().then((function(e){r=e.ip,console.log("userIp"),console.log(r)})).catch((function(){r="127.0.0.1"})).then((function(){if(localStorage.setItem("userIp",r),null!==localStorage.getItem("user")&&"0"!==localStorage.getItem("noob")&&!b){I.email=localStorage.getItem("user"),document.getElementById("email").value=localStorage.getItem("user"),document.getElementById("firstName").value=localStorage.getItem("firstName"),document.getElementById("lastName").value=localStorage.getItem("lastName"),document.getElementById("customerMobile").value=localStorage.getItem("customerMobile"),document.getElementById("header").style.paddingTop="10px",document.getElementById("welcome-message").innerHTML="Verifica tu información:";var e,t=d(document.getElementsByClassName("secondScreen"));try{for(t.s();!(e=t.n()).done;){e.value.style.display="none"}}catch(e){t.e(e)}finally{t.f()}w(),E()}})),document.getElementById("sideload-msg").style.display="none",document.getElementById("app-body").style.display="flex",document.getElementById("email-field").oninput=w,document.getElementById("password-field").oninput=w,document.getElementById("login-form").onsubmit=S)}));var x=document.querySelector("#firstName"),M=document.querySelector("#lastName"),A=document.querySelector("#customerMobile"),j=document.querySelector("#togglePassword"),P=document.querySelector("#togglePassword1"),W=document.querySelector("#togglePassword2"),L=document.querySelector("#password"),R=document.querySelector("#password1"),_=document.querySelector("#password2");x.addEventListener("keyup",(function(){localStorage.setItem("firstName",x.value)})),M.addEventListener("keyup",(function(){localStorage.setItem("lastName",M.value)})),A.addEventListener("keyup",(function(){localStorage.setItem("customerMobile",A.value)})),j.addEventListener("click",(function(e){var t="password"===L.getAttribute("type")?"text":"password";L.setAttribute("type",t),this.classList.toggle("fa-eye-slash")})),P.addEventListener("click",(function(e){var t="password"===R.getAttribute("type")?"text":"password";R.setAttribute("type",t),this.classList.toggle("fa-eye-slash")})),W.addEventListener("click",(function(e){var t="password"===_.getAttribute("type")?"text":"password";_.setAttribute("type",t),this.classList.toggle("fa-eye-slash")}))},72:function(e,t,n){e.exports=n.p+"assets/icon-16.png"},73:function(e,t,n){e.exports=n.p+"assets/icon-32.png"},74:function(e,t,n){e.exports=n.p+"assets/icon-80_1.png"},85:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getIp",value:function(){return fetch("https://jsonip.com").then((function(e){return e.json()}))}}])&&o(t.prototype,n),r&&o(t,r),e}());t.a=r}});
//# sourceMappingURL=app.js.map